{
  "schema": {
    "stdout": "\n============================================================\nSPENDSENSE SCHEMA VALIDATION\n============================================================\n\n============================================================\nSCHEMA STRUCTURE VALIDATION\n============================================================\n\nTable Validation:\n------------------------------------------------------------\n\u2705 users\n\u2705 transactions\n\u2705 persona_history\n\u2705 recommendations\n\u2705 decision_traces\n\u2705 consent_logs\n\u2705 liabilities\n\u2705 accounts\n\nColumn Validation:\n------------------------------------------------------------\n\n\ud83d\udccb Users Table:\n  \u2705 user_id\n  \u2705 name\n  \u26a0\ufe0f  email - should be unique\n  \u2705 credit_score\n  \u2705 consent_status\n  \u2705 consent_timestamp\n  \u2705 created_at\n\n\ud83d\udccb Accounts Table:\n  \u2705 account_id\n  \u2705 user_id\n  \u2705 type\n  \u2705 subtype\n  \u2705 balance_available\n  \u2705 balance_current\n  \u2705 credit_limit\n  \u2705 iso_currency_code\n  \u2705 holder_category\n  \u2705 created_at\n\n\ud83d\udccb Transactions Table:\n  \u2705 transaction_id\n  \u2705 account_id\n  \u2705 date\n  \u2705 amount\n  \u2705 merchant_name\n  \u2705 merchant_entity_id\n  \u2705 payment_channel\n  \u2705 category_primary\n  \u2705 category_detailed\n  \u2705 pending\n\n\ud83d\udccb Liabilities Table:\n  \u2705 liability_id\n  \u2705 account_id\n  \u2705 type\n  \u2705 apr_percentage\n  \u2705 apr_type\n  \u2705 minimum_payment_amount\n  \u2705 last_payment_amount\n  \u2705 is_overdue\n  \u2705 next_payment_due_date\n  \u2705 last_statement_balance\n  \u2705 interest_rate\n\n\ud83d\udccb ConsentLogs Table:\n  \u2705 id\n  \u2705 user_id\n  \u2705 consent_status\n  \u2705 timestamp\n  \u2705 source\n  \u2705 notes\n\n\ud83d\udccb Recommendations Table:\n  \u2705 recommendation_id\n  \u2705 user_id\n  \u2705 recommendation_type\n  \u2705 content\n  \u2705 rationale\n  \u2705 persona\n  \u2705 created_at\n  \u2705 status\n  \u2705 operator_notes\n\n\ud83d\udccb DecisionTraces Table:\n  \u2705 trace_id\n  \u2705 recommendation_id\n  \u2705 input_signals\n  \u2705 persona_assigned\n  \u2705 persona_reasoning\n  \u2705 template_used\n  \u2705 variables_inserted\n  \u2705 eligibility_checks\n  \u2705 timestamp\n  \u2705 version\n  \u2139\ufe0f  Extra columns: signal_context, base_data, triggered_signals, rationale_variables, rationale_variable_sources, variable_sources\n\n\ud83d\udccb PersonaHistory Table:\n  \u2705 id\n  \u2705 user_id\n  \u2705 persona\n  \u2705 window_days\n  \u2705 assigned_at\n  \u2705 signals\n\n============================================================\nFOREIGN KEY VALIDATION\n============================================================\n\nOrphaned Records Check:\n------------------------------------------------------------\n  Accounts: 0 \u2705\n  Transactions: 0 \u2705\n  Liabilities: 0 \u2705\n  Consent Logs: 0 \u2705\n  Recommendations: 0 \u2705\n  Decision Traces: 0 \u2705\n  Persona History: 0 \u2705\n\n============================================================\nDATA CONSTRAINT VALIDATION\n============================================================\n\n\u2705 Credit scores within valid range (300-850)\n\u2705 All liability types are valid\n\u2705 All credit cards have credit_limit set\n\u2705 All users with consent have timestamps\n\u2705 No negative account balances\n\u2705 All credit card utilizations <= 100%\n\u2705 All recommendation types are valid\n\u2705 All recommendation statuses are valid\n\u2705 All persona_history window_days are valid (30 or 180)\n\nIssues Found:\n  \u274c Invalid account types: ['mortgage', 'student_loan']\n\n============================================================\nDATA QUALITY VALIDATION\n============================================================\n\nTotal Users: 118\nTotal Accounts: 320\nTotal Transactions: 23207\nTotal Liabilities: 122\n\nAverage accounts per user: 2.71\nAverage transactions per account: 72.5\nUsers with consent: 101 (85.6%)\n\u26a0\ufe0f  18 users without accounts\n\u2139\ufe0f  28 accounts without transactions\n\n============================================================\nVALIDATION SUMMARY\n============================================================\n\nSchema Structure: \u2705 PASSED\nForeign Keys: \u2705 PASSED\nData Constraints: \u274c FAILED\n\n\u274c Some validations failed. Please review the issues above.\n",
    "stderr": "",
    "return_code": 0,
    "timestamp": "2025-11-05T22:28:39.556602"
  },
  "features": {
    "stdout": "\n================================================================================\nFeature Validation - Sample of 5 Users\n================================================================================\n\nSelected users: user_0001, user_0002, user_0003, user_0004, user_0005\n\nCalculating signals...\n\n================================================================================\nUser: user_0001\n================================================================================\n\n30d Window Highlights:\n  \u2022 Subscriptions: 5 merchants\n  \u2022 Savings: $0.00 inflow\n  \u2022 Credit: 82.1% max utilization\n  \u2022 Income: biweekly frequency\n\n180d Window Highlights:\n  \u2022 Subscriptions: 5 merchants\n  \u2022 Savings: 100.0% growth rate\n  \u2022 Credit: 82.1% max utilization\n\n\u2705 All quality checks passed\n\n================================================================================\nUser: user_0002\n================================================================================\n\n30d Window Highlights:\n  \u2022 Subscriptions: 4 merchants\n  \u2022 Savings: $-296.15 inflow\n  \u2022 Credit: 27.6% max utilization\n  \u2022 Income: monthly frequency\n\n180d Window Highlights:\n  \u2022 Subscriptions: 5 merchants\n  \u2022 Savings: -7.2% growth rate\n  \u2022 Credit: 27.6% max utilization\n\n\u2705 All quality checks passed\n\n================================================================================\nUser: user_0003\n================================================================================\n\n30d Window Highlights:\n  \u2022 Subscriptions: 5 merchants\n  \u2022 Savings: $1325.94 inflow\n  \u2022 Credit: 39.4% max utilization\n  \u2022 Income: weekly frequency\n\n180d Window Highlights:\n  \u2022 Subscriptions: 6 merchants\n  \u2022 Savings: 100.0% growth rate\n  \u2022 Credit: 39.4% max utilization\n\n\u2705 All quality checks passed\n\n================================================================================\nUser: user_0004\n================================================================================\n\n30d Window Highlights:\n  \u2022 Subscriptions: 1 merchants\n  \u2022 Savings: $201.64 inflow\n  \u2022 Credit: 38.0% max utilization\n  \u2022 Income: monthly frequency\n\n180d Window Highlights:\n  \u2022 Subscriptions: 2 merchants\n  \u2022 Savings: 100.0% growth rate\n  \u2022 Credit: 38.0% max utilization\n\n\u2705 All quality checks passed\n\n================================================================================\nUser: user_0005\n================================================================================\n\n30d Window Highlights:\n  \u2022 Subscriptions: 3 merchants\n  \u2022 Savings: $0.00 inflow\n  \u2022 Credit: 81.8% max utilization\n  \u2022 Income: biweekly frequency\n\n180d Window Highlights:\n  \u2022 Subscriptions: 3 merchants\n  \u2022 Savings: 13.5% growth rate\n  \u2022 Credit: 81.8% max utilization\n\n\u2705 All quality checks passed\n\n================================================================================\nOVERALL STATISTICS\n================================================================================\nSuccessfully calculated: 5/5\n\nAverage metrics (30d window):\n  \u2022 Recurring merchants: 3.6\n  \u2022 Max credit utilization: 53.8%\n  \u2022 Users with income detected: 5\n  \u2022 Users with savings: 5\n\n================================================================================\n\n",
    "stderr": "",
    "return_code": 0,
    "timestamp": "2025-11-05T22:28:39.756942"
  },
  "personas": {
    "stdout": "\n================================================================================\nPersona Assignment Validation - Sample of 10 Users\n================================================================================\n\nSelected users: user_0001, user_0002, user_0003, user_0004, user_0005, user_0006, user_0007, user_0008, user_0009, user_0010\n\nAssigning personas...\n\n================================================================================\nPERSONA DISTRIBUTION\n================================================================================\n\nTotal users: 10\n\nPersona counts:\n  \u2022 High Utilization: 10 (100.0%)\n\n================================================================================\nSAMPLE ASSIGNMENTS\n================================================================================\n\n1. User: user_0001\n   Persona: High Utilization\n   Reasoning: High Utilization: Credit utilization at 82.1%, Interest charges detected (also matched: Subscription...\n\n2. User: user_0002\n   Persona: High Utilization\n   Reasoning: High Utilization: Interest charges detected (also matched: Subscription-Heavy)...\n\n3. User: user_0003\n   Persona: High Utilization\n   Reasoning: High Utilization: Interest charges detected, Only making minimum payments (also matched: Subscriptio...\n\n4. User: user_0004\n   Persona: High Utilization\n   Reasoning: High Utilization: Has overdue payments...\n\n5. User: user_0005\n   Persona: High Utilization\n   Reasoning: High Utilization: Credit utilization at 81.8%, Interest charges detected (also matched: Subscription...\n\n================================================================================\n\n",
    "stderr": "",
    "return_code": 0,
    "timestamp": "2025-11-05T22:28:39.987238"
  },
  "recommendations": {
    "stdout": "\n======================================================================\nValidating recommendations for 5 sample users\n======================================================================\n\nUser: user_0001\nRecommendations generated: 8\n  Education recommendations: 5\n  Partner offers: 3\n  \u2705 Validation passed!\n\nUser: user_0002\nRecommendations generated: 7\n  Education recommendations: 4\n  Partner offers: 3\n  \u2705 Validation passed!\n\nUser: user_0003\nRecommendations generated: 8\n  Education recommendations: 5\n  Partner offers: 3\n  \u2705 Validation passed!\n\nUser: user_0004\nRecommendations generated: 4\n  Education recommendations: 2\n  Partner offers: 2\n  \u2705 Validation passed!\n\nUser: user_0005\nRecommendations generated: 8\n  Education recommendations: 5\n  Partner offers: 3\n  \u2705 Validation passed!\n\n",
    "stderr": "",
    "return_code": 0,
    "timestamp": "2025-11-05T22:28:40.305739"
  }
}